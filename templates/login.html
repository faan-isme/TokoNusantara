<!-- halaman login & register -->
<!doctype html>
<html lang="en">

<head>
    <title>Login -Toko Nusantara</title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta property="og:title" content="Login Toko Nusantara" />
    <meta property="og:description" content="Mau beli sesuatu mejadi mudah, ayo dukung UMKM" />
    <meta property="og:image" content="{{url_for('static', filename='logo_red.png')}}" />
    <link rel="shortcut icon" href="{{url_for('static', filename='favicon.ico')}}" type="image/x-icon" />
    <link rel="icon" href="{{url_for('static', filename='favicon.ico')}}" type="image/x-icon" />

    <!-- Bootstrap CSS v5.2.1 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous">

 
    <!-- jquery -->
    <script src="https://code.jquery.com/jquery-3.6.0.js"
        integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
    <!-- font-awsome -->
    <script src="https://kit.fontawesome.com/2efb8198c8.js" crossorigin="anonymous"></script>
    <style>
        .navbar a {
            float: left;
            display: block;
            color: #070707;
            text-align: center;
            padding: 14px 16px;
            text-decoration: none;
        }

        .active {
            color: green !important;
            border: none;
            border-bottom: 3px solid green;
            border-radius: 0;
            outline: none;
        }

        .myswitch {
            width: 100px;
            height: 50px;

        }
        
    </style>
    <script>
        {% if msg %}
            alert('{{msg}}')
            window.location.href='/login'
        {% endif %}
        $(document).ready(function () {
            // Initial setup
            toggleFields('customer');

            // Handle navbar link click event
            $('.navbar a').click(function (e) {
                e.preventDefault();
                var userType = $(this).attr('id').replace('Link', ''); // Extract 'customer' or 'seller'
                toggleFields(userType);
            });

            // Function to toggle fields based on user type
            function toggleFields(userType) {
                // Update navbar active state
                $('.navbar a').removeClass('active');
                $('#' + userType + 'Link').addClass('active');

                // Update form fields based on user type
                if (userType === 'customer') {
                    $('#toserbaname').attr('id', 'username').attr('name', 'username');
                    $('label[for="toserbaname"]').attr('for', 'username').text('Username');
                } else if (userType === 'seller') {
                    $('#username').attr('id', 'toserbaname').attr('name', 'toserbaname');
                    $('label[for="username"]').attr('for', 'toserbaname').text('Toserbaname');
                }
            }
        });
        function toggleElements() {
            var loginElement = document.getElementById("loginForm");
            var registerElement = document.getElementById("registrationForm");
            var loginText = document.getElementById("loginText");
            var loginNav = document.getElementById("loginNav");

            if (loginElement && registerElement) {
                loginElement.classList.toggle("d-none");
                registerElement.classList.toggle("d-none");
            }

            if (loginText.innerHTML === "Login") {
                loginNav.innerHTML = "Register";
                loginText.innerHTML = "Register as?";
            } else {
                loginNav.innerHTML = "Login";
                loginText.innerHTML = "Login";

            }
        }
    </script>
</head>

<body>
    <div id="navbar" class="container d-flex justify-content-center mt-3 mb-5">
        <div style="position: absolute;left: 20px;top: 20px;">
            <a href="/"><i class="fa-solid fa-xl fa-chevron-left" style="color: #000000;"></i></a>
        </div> 
        <h2 id="loginNav">Login</h2>
    </div>
    <div class="container d-flex justify-content-center ">
        <div class="margin-auto" style="width: 400px;">
            <!-- carousel -->
            <div class="rounded-4" style="height: 200px; overflow: hidden;">
                <div id="myCarousel" class="carousel slide" data-bs-ride="carousel">
                    <div class="carousel-inner">
                        <div class="carousel-item active">
                            <img src="/static/img/carousel-login-1.jpg" class="d-block w-100 " alt="Image 1">
                        </div>
                        <div class="carousel-item">
                            <img src="/static/img/carousel-login-2.jpg" class="d-block w-100" alt="Image 2">
                        </div>
                        <div class="carousel-item">
                            <img src="/static/img/carousel-login-3.jpg" class="d-block w-100" alt="Image 3">
                        </div>
                    </div>

                    <ol class="carousel-indicators" style="top: 180px;">
                        <li data-bs-target="#myCarousel" data-bs-slide-to="0" class="active"></li>
                        <li data-bs-target="#myCarousel" data-bs-slide-to="1"></li>
                        <li data-bs-target="#myCarousel" data-bs-slide-to="2"></li>
                    </ol>

                </div>

            </div>

            <h3 class="py-3" id="loginText">Login</h3>
            <!-- Form Login -->
            <form action="/login" method="post" id="loginForm">
                <!-- Email input -->
                <div class="form-floating mb-3">
                    <input type="email" class="form-control border-0 border-bottom  px-0" id="email" name="email"
                        placeholder="name@example.com" style="border-radius: 0;" required>
                    <label for="email" class="px-0">Email address</label>
                </div>

                <!-- Password input -->

                <div class="form-floating">
                    <input type="password" class="form-control border-0 border-bottom px-0" id="password"
                        name="password" placeholder="Password" style="border-radius: 0;" required>
                    <label for="password" class="px-0">Password</label>
                </div>

                <!-- remember me & forgot password-->
                <br>
                <div class="row mb-4">
                    <div class="col d-flex justify-content-center">
                        <!-- Checkbox -->
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="True" id="form2Example31" />
                            <label class="form-check-label" for="form2Example31"> Remember me </label>
                        </div>
                    </div>

                    <div class="col">
                        <a href="#!">Forgot password?</a>
                    </div>
                </div>

                <!-- Submit button -->
                <div class="my-3 d-flex justify-content-center">
                    <button class="btn btn-primary " type="submit" style="width: 100%;">login</button>
                    <!-- <button class="btn btn-outline-danger mx-4" type="button"
                        onclick="document.getElementById('loginForm').reset()" style="width: 100px;">clear</button> -->
                </div>

                <!-- Register buttons -->
                <div class="text-center">
                    <p>Not a member? <a href="#" onclick="toggleElements()">Register</a></p>
                </div>
            </form>
            <!-- Form Register -->
            <form action="/register" method="post" id="registrationForm"
                oninput="pw2.setCustomValidity(pw2.value!=pw.value?'password do not match':'')" class="d-none">
                <!-- switch role -->
                <div class="container d-flex justify-content-center">
                    <div class="navbar">
                        <a href="#" id="customerLink" class="myswitch active mx-2">Customer</a>
                        <a href="#" id="sellerLink" class="myswitch mx-2" >Seller</a>
                    </div>
                </div>

                <!-- Username input -->
                <div class="form-floating mb-3">
                    <input type="text" class="form-control border-0 border-bottom  px-0" id="username" name="username"
                    placeholder="Username" style="border-radius: 0;" required>
                    <label for="username" class="px-0">Username</label>
                </div>

                <!-- Email input -->
                <div class="form-floating mb-3">
                    <input type="email" class="form-control border-0 border-bottom  px-0" id="registerEmail"
                        name="email" placeholder="Email address" style="border-radius: 0;" required>
                    <label for="registerEmail" class="px-0">Email address</label>
                </div>

                <!-- Password input -->
                <div class="form-floating mb-3">
                    <input type="password" class="form-control border-0 border-bottom px-0" id="registerPassword"
                        name="password" placeholder="Password " style="border-radius: 0;" required>
                    <label for="registerPassword" class="px-0">Password</label>
                </div>


                <!-- Repeat Password input -->
                <div class="form-floating mb-3">
                    <input type="password" class="form-control border-0 border-bottom px-0" id="registerRepeatPassword"
                        name="pw2" placeholder="Password Konfirmasi" style="border-radius: 0;" required>
                    <label for="registerRepeatPassword" class="px-0">Password Konfirmasi</label>
                </div>


                <!-- Submit button -->
                <div class="my-3 d-flex justify-content-center">
                    <button type="submit" class="btn btn-primary btn-block mb-3" style="width: 100%;">Register</button>
                </div>
                
                <div class="text-center">
                    <p>Have an account? <a href="#" onclick="toggleElements()">Login</a></p>
                </div>
            </form>
        </div>
    </div>
    <!-- Bootstrap JavaScript Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
        integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3" crossorigin="anonymous">
        </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.min.js"
        integrity="sha384-7VPbUDkoPSGFnVtYi0QogXtr74QeVeeIs99Qfg5YCF+TidwNdjvaKZX19NZ/e6oz" crossorigin="anonymous">
        </script>
</body>

</html>